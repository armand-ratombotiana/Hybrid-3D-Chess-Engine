# Quarkus Configuration

# HTTP
quarkus.http.port=8080
quarkus.http.host=0.0.0.0
quarkus.http.cors=true
quarkus.http.cors.origins=http://localhost:3000,http://localhost:8080
quarkus.http.cors.methods=GET,POST,PUT,DELETE,OPTIONS
quarkus.http.cors.headers=accept,authorization,content-type,x-requested-with
quarkus.http.cors.exposed-headers=Content-Disposition
quarkus.http.cors.access-control-max-age=24H

# Database
quarkus.datasource.db-kind=postgresql
quarkus.datasource.username=${POSTGRES_USER:chess_user}
quarkus.datasource.password=${POSTGRES_PASSWORD:chess_pass}
quarkus.datasource.jdbc.url=${QUARKUS_DATASOURCE_JDBC_URL:jdbc:postgresql://localhost:5432/chess_db}
quarkus.datasource.jdbc.max-size=20

# Hibernate
quarkus.hibernate-orm.database.generation=update
quarkus.hibernate-orm.log.sql=false
quarkus.hibernate-orm.sql-load-script=import.sql

# Redis
quarkus.redis.hosts=${REDIS_URL:redis://localhost:6379}
quarkus.redis.password=${REDIS_PASSWORD:chess_redis_pass}
quarkus.redis.client-type=standalone
quarkus.redis.timeout=10s

# JWT Security
mp.jwt.verify.publickey.location=META-INF/resources/publicKey.pem
mp.jwt.verify.issuer=chess-platform
smallrye.jwt.sign.key.location=META-INF/resources/privateKey.pem
smallrye.jwt.new-token.lifespan=900
quarkus.smallrye-jwt.enabled=true

# REST Client for AI Service
quarkus.rest-client.ai-service.url=${AI_SERVICE_URL:http://localhost:8000}
quarkus.rest-client.ai-service.scope=jakarta.inject.Singleton
quarkus.rest-client.ai-service.read-timeout=30000
quarkus.rest-client.ai-service.connection-timeout=5000

# WebSocket
quarkus.websocket.max-frame-size=1048576

# Logging
quarkus.log.level=INFO
quarkus.log.category."com.chess".level=DEBUG
quarkus.log.console.enable=true
quarkus.log.console.format=%d{HH:mm:ss} %-5p [%c{2.}] (%t) %s%e%n
quarkus.log.console.json=false

# Health & Metrics
quarkus.smallrye-health.root-path=/q/health
quarkus.micrometer.binder.http-server.enabled=true
quarkus.micrometer.binder.jvm.enabled=true
quarkus.micrometer.export.prometheus.enabled=true
quarkus.micrometer.export.prometheus.path=/q/metrics

# Dev mode configuration
%dev.quarkus.log.console.json=false
%dev.quarkus.hibernate-orm.log.sql=true
%dev.quarkus.http.port=8080

# Prod mode configuration
%prod.quarkus.log.console.json=true
%prod.quarkus.hibernate-orm.log.sql=false
%prod.quarkus.log.level=WARN
%prod.quarkus.log.category."com.chess".level=INFO

# Native build configuration
quarkus.native.additional-build-args=--initialize-at-run-time=io.vertx.core.impl.launcher.commands.ExecUtils
